import type {EnkoreAutogeneratedFile} from "#~src/export/__star_export.mts"
import type {AllEnkoreTargets} from "#~src/AllEnkoreTargets.d.mts"

import type {TargetIdentifier} from "@enkore/primitives"
import type {TargetIdentifierToEntityName} from "#~src/TargetIdentifierToEntityName.d.mts"

type Map = {
	[K in TargetIdentifier]: Extract<AllEnkoreTargets, {
		entityKind: TargetIdentifierToEntityName<K>
	}>
}

type Targets = {
	[K in TargetIdentifier]: {
		name: K
		options: Map[K]
	}
}

export type Definition = {
	target: Targets[keyof Targets]

	autogeneratedFiles?: EnkoreAutogeneratedFile[]

	buildConstants?: Record<string, string>
}
